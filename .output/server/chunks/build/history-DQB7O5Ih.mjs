import { _ as __nuxt_component_0 } from './nuxt-link-CP638tQN.mjs';
import { u as useReceiptStore, a as useBreakpoint, _ as _imports_0, b as useNotify, c as _sfc_main$1$2, d as _sfc_main$3, f as useTransaction } from './breakpoint-D0vuqbdq.mjs';
import { _ as _sfc_main$1$1, a as __nuxt_component_1, b as _sfc_main$2$1 } from './PrimaryButton-CKvHtW81.mjs';
import { ref, mergeProps, withCtx, createVNode, unref, isRef, watch, computed, withModifiers, createTextVNode, withDirectives, vShow, useSSRContext } from 'vue';
import { ssrRenderAttrs, ssrRenderComponent, ssrRenderStyle, ssrRenderAttr, ssrInterpolate, ssrRenderList } from 'vue/server-renderer';
import { a as useI18n, u as useHead, b as useRuntimeConfig, _ as _export_sfc, s as storages } from './server.mjs';
import { defineStore } from 'pinia';
import script$4 from './index-DcctWVMg.mjs';
import script$3 from './index-DhGLZj8T.mjs';
import script$2 from './index-JlWhXKJ3.mjs';
import script$1 from './index-Tis4GUVn.mjs';
import moment from 'moment';
import script from './index-CS8sdzmN.mjs';
import './index-DwowyFOw.mjs';
import '@primeuix/utils';
import './index-HVZBZE_C.mjs';
import './index-_YLQpnfS.mjs';
import './index-f6-L4oOs.mjs';
import '@primeuix/styled';
import '@primeuix/utils/dom';
import '@primeuix/utils/object';
import '@primeuix/styles/inputtext';
import './index-Cd02S5MF.mjs';
import './index-SKZaUXlw.mjs';
import './index-BLn-pl6M.mjs';
import './index-2dA4pXcI.mjs';
import './index-DpRrGZTR.mjs';
import '@primeuix/utils/uuid';
import '@primeuix/styles/ripple';
import '@primeuix/styles/button';
import '../_/nitro.mjs';
import 'node:http';
import 'node:https';
import 'node:events';
import 'node:buffer';
import '@intlify/utils';
import 'vue-router';
import 'node:fs';
import 'node:path';
import '@primevue/core/base/style';
import '@primevue/core/basecomponent/style';
import '@primeuix/styles/autocomplete';
import '@primeuix/styles/cascadeselect';
import '@primeuix/styles/checkbox';
import '@primeuix/styles/checkboxgroup';
import '@primeuix/styles/colorpicker';
import '@primeuix/styles/datepicker';
import '@primeuix/styles/floatlabel';
import '@primeuix/styles/iconfield';
import '@primeuix/styles/iftalabel';
import '@primeuix/styles/inputchips';
import '@primeuix/styles/inputgroup';
import '@primeuix/styles/inputnumber';
import '@primeuix/styles/inputotp';
import '@primeuix/styles/knob';
import '@primeuix/styles/listbox';
import '@primeuix/styles/multiselect';
import '@primeuix/styles/password';
import '@primeuix/styles/radiobutton';
import '@primeuix/styles/radiobuttongroup';
import '@primeuix/styles/rating';
import '@primeuix/styles/select';
import '@primeuix/styles/selectbutton';
import '@primeuix/styles/slider';
import '@primeuix/styles/textarea';
import '@primeuix/styles/togglebutton';
import '@primeuix/styles/toggleswitch';
import '@primeuix/styles/treeselect';
import '@primeuix/styles/buttongroup';
import '@primeuix/styles/speeddial';
import '@primeuix/styles/splitbutton';
import '@primeuix/styles/datatable';
import '@primeuix/styles/dataview';
import '@primeuix/styles/orderlist';
import '@primeuix/styles/organizationchart';
import '@primeuix/styles/paginator';
import '@primeuix/styles/picklist';
import '@primeuix/styles/tree';
import '@primeuix/styles/treetable';
import '@primeuix/styles/timeline';
import '@primeuix/styles/virtualscroller';
import '@primeuix/styles/accordion';
import '@primeuix/styles/card';
import '@primeuix/styles/divider';
import '@primeuix/styles/fieldset';
import '@primeuix/styles/panel';
import '@primeuix/styles/scrollpanel';
import '@primeuix/styles/splitter';
import '@primeuix/styles/stepper';
import '@primeuix/styles/tabview';
import '@primeuix/styles/tabs';
import '@primeuix/styles/toolbar';
import '@primeuix/styles/confirmdialog';
import '@primeuix/styles/confirmpopup';
import '@primeuix/styles/dialog';
import '@primeuix/styles/drawer';
import '@primeuix/styles/popover';
import '@primeuix/styles/fileupload';
import '@primeuix/styles/breadcrumb';
import '@primeuix/styles/contextmenu';
import '@primeuix/styles/dock';
import '@primeuix/styles/menu';
import '@primeuix/styles/menubar';
import '@primeuix/styles/megamenu';
import '@primeuix/styles/panelmenu';
import '@primeuix/styles/steps';
import '@primeuix/styles/tabmenu';
import '@primeuix/styles/tieredmenu';
import '@primeuix/styles/message';
import '@primeuix/styles/inlinemessage';
import '@primeuix/styles/toast';
import '@primeuix/styles/carousel';
import '@primeuix/styles/galleria';
import '@primeuix/styles/image';
import '@primeuix/styles/imagecompare';
import '@primeuix/styles/avatar';
import '@primeuix/styles/badge';
import '@primeuix/styles/blockui';
import '@primeuix/styles/chip';
import '@primeuix/styles/inplace';
import '@primeuix/styles/metergroup';
import '@primeuix/styles/overlaybadge';
import '@primeuix/styles/scrolltop';
import '@primeuix/styles/skeleton';
import '@primeuix/styles/progressbar';
import '@primeuix/styles/progressspinner';
import '@primeuix/styles/tag';
import '@primeuix/styles/terminal';
import '@primevue/forms/form/style';
import '@primevue/forms/formfield/style';
import '@primeuix/styles/tooltip';
import 'node:url';
import 'node:crypto';
import 'deep-pick-omit';
import '@primeuix/utils/eventbus';
import '@primeuix/styles/base';
import '../routes/renderer.mjs';
import 'vue-bundle-renderer/runtime';
import 'unhead/server';
import 'devalue';
import 'unhead/utils';
import '@primeuix/utils/zindex';
import './index-p2BB5KWr.mjs';
import './index-De0dg7Ws.mjs';
import './index-rAVNvoJo.mjs';
import './index-D21vFaAL.mjs';
import './index-C_BIMYbC.mjs';
import './index-Din928lO.mjs';

const useHistoryStore = defineStore(
  "history",
  () => {
    const list = ref({});
    const updateList = (history) => list.value = history;
    const resetList = () => list.value = {};
    return {
      list,
      updateList,
      resetList
    };
  },
  {
    persist: {
      storage: storages.localStorage()
    }
  }
);
const _sfc_main$2 = {
  __name: "HistorySearchForm",
  __ssrInlineRender: true,
  emits: ["showHistory"],
  setup(__props, { emit: __emit }) {
    useHistoryStore();
    useNotify();
    const { t, locale } = useI18n();
    const form = ref({
      clientId: "",
      lang: locale.value
    });
    const invalidInput = ref({
      clientId: false
    });
    const formError = ref([]);
    const isLoading = ref(false);
    const resetInvalidInput = () => invalidInput.value = {
      clientId: false
    };
    const errorMessage = (name) => {
      const error = formError.value.find((e) => e.name === name);
      return error ? error.message : "";
    };
    watch(
      () => formError.value,
      (error) => {
        invalidInput.value = error && error.length > 0 ? {
          clientId: error.some((e) => e.name === "clientId")
        } : resetInvalidInput();
      },
      { immediate: true }
    );
    return (_ctx, _push, _parent, _attrs) => {
      const _component_logo_white_blue = _sfc_main$1$2;
      const _component_input_text_input = _sfc_main$3;
      const _component_button_primary_button = __nuxt_component_1;
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "flex flex-col w-full max-w-md mx-auto space-y-2 rounded-md shadow primary-slate p-7" }, _attrs))}>`);
      _push(ssrRenderComponent(_component_logo_white_blue, {
        size: "w-24 h-24",
        class: "self-center"
      }, null, _parent));
      _push(`<h4 class="text-lg font-semibold text-center capitalize text-secondary">${ssrInterpolate(_ctx.$t("page.history.form.title"))}</h4><form aria-label="Search client form"><div><label for="clientId" class="text-xs text-secondary">${ssrInterpolate(_ctx.$t("page.history.label.client"))}</label>`);
      _push(ssrRenderComponent(_component_input_text_input, {
        id: "clientId",
        modelValue: unref(form).clientId,
        "onUpdate:modelValue": ($event) => unref(form).clientId = $event,
        "custom-class": "uppercase",
        "border-radius": "rounded-md",
        "border-color": "border-gray-300",
        autocomplete: "off"
      }, null, _parent));
      if (unref(invalidInput).clientId) {
        _push(`<p class="text-xs text-red-500 transition duration-300 ease-out animate-swingIn-top-fwd">${ssrInterpolate(errorMessage("clientId"))}</p>`);
      } else {
        _push(`<!---->`);
      }
      _push(`</div>`);
      _push(ssrRenderComponent(_component_button_primary_button, {
        type: "submit",
        label: _ctx.$t("page.button.search"),
        loading: unref(isLoading),
        icon: "pi pi-search",
        iconPos: "right",
        "pt:label": "text-sm",
        width: "w-full mt-5",
        class: "h-9",
        "aria-label": "Search payment history"
      }, null, _parent));
      _push(`</form></div>`);
    };
  }
};
const _sfc_setup$2 = _sfc_main$2.setup;
_sfc_main$2.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/History/SearchForm.vue");
  return _sfc_setup$2 ? _sfc_setup$2(props, ctx) : void 0;
};
const useUtils = () => {
  const formatAmount = (amount) => new Intl.NumberFormat("en-US").format(amount);
  const formatDate = (dateTz) => moment.parseZone(dateTz).format("DD MMM, YYYY");
  const filterPayment = (status, payments) => payments.filter(
    (payment) => payment.invoice.status === status.trim().toLowerCase()
  );
  return { formatAmount, formatDate, filterPayment };
};
const _sfc_main$1 = {
  __name: "HistorySummary",
  __ssrInlineRender: true,
  setup(__props) {
    const config = useRuntimeConfig();
    const historyStore = useHistoryStore();
    const { formatAmount, formatDate, filterPayment } = useUtils();
    const { invoiceStatus } = useTransaction();
    const { e, s } = useNotify();
    const { t, locale } = useI18n();
    const isLoading = ref(false);
    const searchIndex = ref("");
    const filter = ref();
    const filteredBills = ref([]);
    const filterOption = ref("");
    const formError = ref([]);
    const toggleFilter = (event) => filter.value.toggle(event);
    const showBillList = computed(
      () => filteredBills.value.length > 0 ? true : false
    );
    const isFilterActive = computed(
      () => filterOption.value.trim().length > 0 ? true : false
    );
    const filteringBills = (status) => {
      toggleFilter();
      filterOption.value = status;
      filteredBills.value = filterPayment(status, historyStore.list.payments);
    };
    const clearFilter = () => {
      filterOption.value = "";
      filteredBills.value = historyStore.list.payments;
    };
    const submit = async () => {
      isLoading.value = true;
      try {
        const { apiResponse, validError } = await $fetch(
          config.public.server.history,
          {
            method: "POST",
            body: {
              clientId: searchIndex.value,
              lang: locale.value
            },
            key: "history"
          }
        );
        formError.value = validError;
        console.log("search receipt response in summary: ", apiResponse);
        if (apiResponse === null) {
          e(t("page.error.http_500"));
        } else if (typeof apiResponse.pesake.code === "number") {
          e(apiResponse.pesake.detail);
        } else if (Object.keys(apiResponse?.data).length > 0) {
          historyStore.updateList(apiResponse.data);
          s(t("page.success.history_found"));
        }
      } catch (error) {
        e(t("page.error.global"));
        console.log("history summary error: ", error);
      } finally {
        isLoading.value = false;
      }
    };
    watch(
      () => formError.value,
      (error) => {
        if (error && error.length > 0) {
          e(error[0].message);
        }
      },
      { immediate: true }
    );
    return (_ctx, _push, _parent, _attrs) => {
      const _component_InputGroup = script$1;
      const _component_input_text_input = _sfc_main$3;
      const _component_InputGroupAddon = script$2;
      const _component_button_primary_button = __nuxt_component_1;
      const _component_icon_light = _sfc_main$2$1;
      const _component_Popover = script$3;
      const _component_Badge = script$4;
      const _component_nuxt_link = __nuxt_component_0;
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "w-full max-w-2xl p-2 mx-auto space-y-4 bg-white border border-gray-300 rounded-md" }, _attrs))} data-v-61ec7f96><ul class="flex flex-col md:flex-row md:items-center justify-between pb-2.5 border-b border-gray-200 space-y-3 md:space-y-0" data-v-61ec7f96><li class="flex flex-row items-center space-x-1.5" data-v-61ec7f96><span class="p-1.5 bg-emerald-200 rounded" data-v-61ec7f96><i class="pi pi-user text-emerald-700" data-v-61ec7f96></i></span><span data-v-61ec7f96><h5 class="text-base font-semibold" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.client_history"))}</h5><h6 class="text-sm" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.view_bill"))}</h6></span></li><li class="flex flex-row items-center space-x-1" data-v-61ec7f96><span style="${ssrRenderStyle(unref(isLoading) ? null : { display: "none" })}" data-v-61ec7f96><i class="text-blue-500 pi pi-spinner animate-spin" data-v-61ec7f96></i></span>`);
      _push(ssrRenderComponent(_component_InputGroup, null, {
        default: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(ssrRenderComponent(_component_input_text_input, {
              id: "searchIndex",
              modelValue: unref(searchIndex),
              "onUpdate:modelValue": ($event) => isRef(searchIndex) ? searchIndex.value = $event : null,
              "custom-class": "uppercase",
              "border-radius": "rounded-md",
              "border-color": "border-gray-300",
              autocomplete: "off",
              placeholder: _ctx.$t("page.history.label.client")
            }, null, _parent2, _scopeId));
            _push2(ssrRenderComponent(_component_InputGroupAddon, null, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(ssrRenderComponent(_component_button_primary_button, {
                    onClick: submit,
                    icon: "pi pi-search",
                    "pt:root": "h-[2.20rem]"
                  }, null, _parent3, _scopeId2));
                } else {
                  return [
                    createVNode(_component_button_primary_button, {
                      onClick: withModifiers(submit, ["prevent"]),
                      icon: "pi pi-search",
                      "pt:root": "h-[2.20rem]"
                    })
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
          } else {
            return [
              createVNode(_component_input_text_input, {
                id: "searchIndex",
                modelValue: unref(searchIndex),
                "onUpdate:modelValue": ($event) => isRef(searchIndex) ? searchIndex.value = $event : null,
                "custom-class": "uppercase",
                "border-radius": "rounded-md",
                "border-color": "border-gray-300",
                autocomplete: "off",
                placeholder: _ctx.$t("page.history.label.client")
              }, null, 8, ["modelValue", "onUpdate:modelValue", "placeholder"]),
              createVNode(_component_InputGroupAddon, null, {
                default: withCtx(() => [
                  createVNode(_component_button_primary_button, {
                    onClick: withModifiers(submit, ["prevent"]),
                    icon: "pi pi-search",
                    "pt:root": "h-[2.20rem]"
                  })
                ]),
                _: 1
              })
            ];
          }
        }),
        _: 1
      }, _parent));
      _push(`</li></ul><div class="pb-3 space-y-2" data-v-61ec7f96><div class="px-1.5 py-2 rounded bg-blue-100 border border-gray-300 space-y-1" data-v-61ec7f96><p class="pb-0.5 space-x-2 text-sm border-b border-gray-300" data-v-61ec7f96><span class="font-semibold text-slate-900" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.bills"))}</span><span class="font-semibold text-slate-500" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.gb_recap"))}</span></p><ol class="flex flex-row flex-wrap justify-between gap-3" data-v-61ec7f96><li class="flex flex-col font-bold" data-v-61ec7f96><span class="text-xs text-slate-500" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.stats.total"))}</span><span class="text-xl sm:text-2xl" data-v-61ec7f96>${ssrInterpolate(unref(formatAmount)(unref(historyStore).list.totals.totalInvoices))}</span></li><li class="flex flex-col font-bold" data-v-61ec7f96><span class="text-xs text-slate-500" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.stats.paid"))}</span><span class="text-xl sm:text-2xl" data-v-61ec7f96>${ssrInterpolate(unref(formatAmount)(unref(historyStore).list.totals.totalPaidInvoices))}</span></li><li class="flex flex-col font-bold" data-v-61ec7f96><span class="text-xs text-slate-500" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.stats.unpaid"))}</span><span class="text-xl sm:text-2xl" data-v-61ec7f96>${ssrInterpolate(unref(formatAmount)(unref(historyStore).list.totals.totalUnpaidInvoices))}</span></li><li class="flex flex-col font-bold" data-v-61ec7f96><span class="text-xs text-slate-500" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.stats.partial"))}</span><span class="text-xl sm:text-2xl" data-v-61ec7f96>${ssrInterpolate(unref(formatAmount)(
        unref(historyStore).list.totals.totalPartiallypaidInvoices
      ))}</span></li><li class="flex flex-col font-bold" data-v-61ec7f96><span class="text-xs text-slate-500" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.stats.late"))}</span><span class="text-xl sm:text-2xl" data-v-61ec7f96>${ssrInterpolate(unref(formatAmount)(unref(historyStore).list.totals.totalLateInvoices))}</span></li></ol></div><ol class="grid grid-cols-2 px-1.5 py-2 rounded bg-blue-100 border border-gray-300 divide-x-2 divide-gray-500" data-v-61ec7f96><li class="flex flex-col font-bold" data-v-61ec7f96><span class="text-xs text-slate-500" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.stats.amount.total"))}</span><span class="text-xl sm:text-2xl" data-v-61ec7f96>${ssrInterpolate(unref(formatAmount)(unref(historyStore).list.totals.totalAmount))}${ssrInterpolate(unref(config).public.settings.currency)}</span></li><li class="flex flex-col font-bold text-right" data-v-61ec7f96><span class="text-xs text-slate-500" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.stats.amount.paid"))}</span><span class="text-xl sm:text-2xl" data-v-61ec7f96>${ssrInterpolate(unref(formatAmount)(unref(historyStore).list.totals.totalPaidInvoicesAmount))}${ssrInterpolate(unref(config).public.settings.currency)}</span></li></ol></div><div class="space-y-3" aria-label="Payment history" data-v-61ec7f96><h5 class="flex items-center pb-1 space-x-1 border-b border-gray-300" data-v-61ec7f96>`);
      _push(ssrRenderComponent(_component_icon_light, {
        "prime-icon": "pi pi-filter",
        onClick: toggleFilter
      }, null, _parent));
      _push(`<span class="font-semibold" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.label.stats.filter"))}</span>`);
      if (unref(isFilterActive)) {
        _push(ssrRenderComponent(_component_icon_light, {
          "prime-icon": "pi pi-times-circle",
          style: { "font-size": "0.9rem" },
          onClick: clearFilter
        }, null, _parent));
      } else {
        _push(`<!---->`);
      }
      _push(ssrRenderComponent(_component_Popover, {
        ref_key: "filter",
        ref: filter
      }, {
        default: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<ul class="w-28" data-v-61ec7f96${_scopeId}><li class="flex flex-row items-center justify-between p-1 text-sm cursor-pointer rounded-xs hover:bg-blue-500 hover:text-white" data-v-61ec7f96${_scopeId}> Paid <i class="pi pi-check-circle" style="${ssrRenderStyle([
              { "font-size": "0.8rem", "font-weight": "600" },
              unref(filterOption) === "paid" ? null : { display: "none" }
            ])}" data-v-61ec7f96${_scopeId}></i></li><li class="flex flex-row items-center justify-between p-1 text-sm cursor-pointer hover:bg-blue-500 hover:text-white rounded-xs" data-v-61ec7f96${_scopeId}> Unpaid <i class="pi pi-check-circle" style="${ssrRenderStyle([
              { "font-size": "0.8rem", "font-weight": "600" },
              unref(filterOption) === "unpaid" ? null : { display: "none" }
            ])}" data-v-61ec7f96${_scopeId}></i></li><li class="flex flex-row items-center justify-between p-1 text-sm cursor-pointer hover:bg-blue-500 hover:text-white rounded-xs" data-v-61ec7f96${_scopeId}> Late <i class="pi pi-check-circle" style="${ssrRenderStyle([
              { "font-size": "0.8rem", "font-weight": "600" },
              unref(filterOption) === "late" ? null : { display: "none" }
            ])}" data-v-61ec7f96${_scopeId}></i></li></ul>`);
          } else {
            return [
              createVNode("ul", { class: "w-28" }, [
                createVNode("li", {
                  onClick: withModifiers(($event) => filteringBills("paid"), ["prevent"]),
                  class: "flex flex-row items-center justify-between p-1 text-sm cursor-pointer rounded-xs hover:bg-blue-500 hover:text-white"
                }, [
                  createTextVNode(" Paid "),
                  withDirectives(createVNode("i", {
                    class: "pi pi-check-circle",
                    style: { "font-size": "0.8rem", "font-weight": "600" }
                  }, null, 512), [
                    [vShow, unref(filterOption) === "paid"]
                  ])
                ], 8, ["onClick"]),
                createVNode("li", {
                  onClick: withModifiers(($event) => filteringBills("unpaid"), ["prevent"]),
                  class: "flex flex-row items-center justify-between p-1 text-sm cursor-pointer hover:bg-blue-500 hover:text-white rounded-xs"
                }, [
                  createTextVNode(" Unpaid "),
                  withDirectives(createVNode("i", {
                    class: "pi pi-check-circle",
                    style: { "font-size": "0.8rem", "font-weight": "600" }
                  }, null, 512), [
                    [vShow, unref(filterOption) === "unpaid"]
                  ])
                ], 8, ["onClick"]),
                createVNode("li", {
                  onClick: withModifiers(($event) => filteringBills("late"), ["prevent"]),
                  class: "flex flex-row items-center justify-between p-1 text-sm cursor-pointer hover:bg-blue-500 hover:text-white rounded-xs"
                }, [
                  createTextVNode(" Late "),
                  withDirectives(createVNode("i", {
                    class: "pi pi-check-circle",
                    style: { "font-size": "0.8rem", "font-weight": "600" }
                  }, null, 512), [
                    [vShow, unref(filterOption) === "late"]
                  ])
                ], 8, ["onClick"])
              ])
            ];
          }
        }),
        _: 1
      }, _parent));
      _push(`</h5>`);
      if (unref(showBillList)) {
        _push(`<ul class="space-y-4 divide-y divide-gray-300 sm:w-72 md:w-auto" data-v-61ec7f96><!--[-->`);
        ssrRenderList(unref(filteredBills), (payment) => {
          _push(`<li class="flex flex-row justify-between py-1" data-v-61ec7f96><div class="flex flex-row items-center space-x-2" data-v-61ec7f96><i class="p-2 text-white bg-gray-700 rounded-full pi pi-receipt" data-v-61ec7f96></i><h5 class="flex flex-col" data-v-61ec7f96><span class="text-xs sm:text-sm" data-v-61ec7f96>#${ssrInterpolate(payment.invoice.invoiceCode)}</span><span class="text-xs" data-v-61ec7f96><i class="mr-1 pi pi-user" style="${ssrRenderStyle({ "font-size": "0.7rem", "font-weight": "600" })}" data-v-61ec7f96></i> ${ssrInterpolate(payment.client.firstName)} ${ssrInterpolate(payment.client.lastName)}</span><span class="font-bold sm:text-lg" data-v-61ec7f96>${ssrInterpolate(unref(formatAmount)(payment.amount))}${ssrInterpolate(unref(config).public.settings.currency)}</span></h5></div><div class="flex flex-col items-end space-y-1" data-v-61ec7f96><span class="text-xs font-semibold tracking-tight" data-v-61ec7f96>${ssrInterpolate(unref(formatDate)(payment.invoice.issueDate))}</span><span class="flex flex-col items-center space-x-2 space-y-1 sm:space-y-0 sm:flex-row" data-v-61ec7f96>`);
          _push(ssrRenderComponent(_component_Badge, {
            value: payment.invoice.status,
            size: "small",
            severity: unref(invoiceStatus)(payment.invoice.status),
            class: "capitalize"
          }, null, _parent));
          if (payment?.url !== null) {
            _push(ssrRenderComponent(_component_nuxt_link, {
              to: payment?.url,
              target: "_blank"
            }, {
              default: withCtx((_, _push2, _parent2, _scopeId) => {
                if (_push2) {
                  _push2(`<i class="transition duration-200 ease-linear cursor-pointer hover:text-blue-500 pi pi-cloud-download download-icon" data-v-61ec7f96${_scopeId}></i>`);
                } else {
                  return [
                    createVNode("i", { class: "transition duration-200 ease-linear cursor-pointer hover:text-blue-500 pi pi-cloud-download download-icon" })
                  ];
                }
              }),
              _: 2
            }, _parent));
          } else {
            _push(`<!---->`);
          }
          _push(`</span></div></li>`);
        });
        _push(`<!--]--></ul>`);
      } else {
        _push(`<div class="flex flex-col items-center justify-center h-full space-y-4" data-v-61ec7f96><img${ssrRenderAttr("src", _imports_0)} class="object-contain object-center h-44" alt="Credit card payment illustration" data-v-61ec7f96><h5 class="text-xs font-medium text-center text-secondary" data-v-61ec7f96>${ssrInterpolate(_ctx.$t("page.history.empty_bill"))}</h5></div>`);
      }
      _push(`</div></div>`);
    };
  }
};
const _sfc_setup$1 = _sfc_main$1.setup;
_sfc_main$1.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/History/Summary.vue");
  return _sfc_setup$1 ? _sfc_setup$1(props, ctx) : void 0;
};
const __nuxt_component_3 = /* @__PURE__ */ _export_sfc(_sfc_main$1, [["__scopeId", "data-v-61ec7f96"]]);
const _sfc_main = {
  __name: "history",
  __ssrInlineRender: true,
  setup(__props) {
    useReceiptStore();
    const config = useRuntimeConfig();
    const { t } = useI18n();
    const showHistory = ref(false);
    const currentYear = (/* @__PURE__ */ new Date()).getFullYear();
    const { canShowBillModal } = useBreakpoint();
    useHead({
      title: `${t("meta.history.title")} - ${config.public.appName}`,
      meta: [{ name: "description", content: "My JAWDI application." }]
    });
    const openingReceipt = () => showHistory.value = true;
    return (_ctx, _push, _parent, _attrs) => {
      const _component_nuxt_link = __nuxt_component_0;
      const _component_history_search_form = _sfc_main$2;
      const _component_Translate = _sfc_main$1$1;
      const _component_history_summary = __nuxt_component_3;
      const _component_Dialog = script;
      _push(`<header${ssrRenderAttrs(mergeProps({
        class: "grid w-full h-full md:grid-cols-[auto_1fr] lg:grid-cols-2",
        "aria-label": "New receipt page"
      }, _attrs))}><section class="flex flex-col px-4 bg-topography" aria-label="Search receipt form">`);
      _push(ssrRenderComponent(_component_nuxt_link, {
        to: _ctx.$localePath("/"),
        class: "py-1"
      }, {
        default: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(`<i class="p-1.5 text-sm text-blue-400 transition duration-300 ease-linear rounded-full cursor-pointer bg-slate-200 hover:bg-slate-50 pi pi-arrow-circle-left hover:text-blue-500" style="${ssrRenderStyle({ "font-size": "1.7rem" })}"${_scopeId}></i>`);
          } else {
            return [
              createVNode("i", {
                class: "p-1.5 text-sm text-blue-400 transition duration-300 ease-linear rounded-full cursor-pointer bg-slate-200 hover:bg-slate-50 pi pi-arrow-circle-left hover:text-blue-500",
                style: { "font-size": "1.7rem" }
              })
            ];
          }
        }),
        _: 1
      }, _parent));
      _push(`<div class="flex flex-col items-center justify-center h-full">`);
      _push(ssrRenderComponent(_component_history_search_form, { onShowHistory: openingReceipt }, null, _parent));
      _push(`</div></section><section class="grid-rows-[auto_1fr_auto] items-center hidden h-full space-y-5 overflow-y-auto md:grid" aria-label="Receipt information"><div class="flex justify-end w-full pt-1.5 pr-3">`);
      _push(ssrRenderComponent(_component_Translate, null, null, _parent));
      _push(`</div>`);
      if (unref(showHistory)) {
        _push(`<div class="flex w-full h-full px-1">`);
        _push(ssrRenderComponent(_component_history_summary, null, null, _parent));
        _push(`</div>`);
      } else {
        _push(`<div class="flex flex-col items-center justify-center h-full space-y-4"><img${ssrRenderAttr("src", _imports_0)} class="object-contain object-center h-96" alt="Credit card payment illustration"><h5 class="text-xs font-medium text-center text-secondary">${ssrInterpolate(_ctx.$t("page.history.empty_bill"))}</h5></div>`);
      }
      _push(`<p class="flex justify-between w-full px-2 py-1 text-xs font-semibold text-right"><span><span class="mr-0.5">©</span>${ssrInterpolate(unref(currentYear))} - ${ssrInterpolate(unref(config).public.appName)}</span><span>${ssrInterpolate(_ctx.$t("page.footer.rights"))}</span></p></section>`);
      if (unref(canShowBillModal)) {
        _push(ssrRenderComponent(_component_Dialog, {
          visible: unref(showHistory),
          "onUpdate:visible": ($event) => isRef(showHistory) ? showHistory.value = $event : null,
          maximizable: "",
          modal: ""
        }, {
          default: withCtx((_, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(ssrRenderComponent(_component_history_summary, null, null, _parent2, _scopeId));
            } else {
              return [
                createVNode(_component_history_summary)
              ];
            }
          }),
          _: 1
        }, _parent));
      } else {
        _push(`<!---->`);
      }
      _push(`</header>`);
    };
  }
};
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("pages/receipt/history.vue");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};

export { _sfc_main as default };
//# sourceMappingURL=history-DQB7O5Ih.mjs.map
